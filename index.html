<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast - Sri Lanka</title>
    <style>
        :root {
            --primary-color: #8a2be2;
            --primary-dark: #4b0082;
            --primary-light: #9370db;
            --background: #0f0f1a;
            --card-bg: #1a1a2e;
            --text-primary: #ffffff;
            --text-secondary: #b8b8cc;
            --accent: #ff00ff;
            --success: #00ffaa;
            --warning: #ffaa00;
            --danger: #ff5555;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-color), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .language-selector {
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: var(--primary-color);
        }

        .lang-btn:hover {
            background: var(--primary-dark);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .weather-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .audio-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .audio-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .forecast-content {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .forecast-content::-webkit-scrollbar {
            width: 6px;
        }

        .forecast-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .forecast-content::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .emergency-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .emergency-btn {
            background: linear-gradient(135deg, var(--danger), #ff3333);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .emergency-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 85, 85, 0.4);
        }

        .emergency-info {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--danger);
        }

        .emergency-title {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--danger);
        }

        .api-section {
            grid-column: 1 / -1;
        }

        .api-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .api-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .api-btn:hover {
            background: var(--primary-dark);
        }

        .api-response {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 14px;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-active {
            background-color: var(--success);
        }

        .status-inactive {
            background-color: var(--danger);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        footer {
            margin-top: 40px;
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .api-section {
                grid-column: 1;
            }
            
            header {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C15.87 2 19 5.13 19 9C19 14.25 12 22 12 22C12 22 5 14.25 5 9C5 5.13 8.13 2 12 2ZM12 4C9.24 4 7 6.24 7 9C7 10 7 12 12 18.71C17 12 17 10 17 9C17 6.24 14.76 4 12 4ZM12 6C13.66 6 15 7.34 15 9C15 10.66 13.66 12 12 12C10.34 12 9 10.66 9 9C9 7.34 10.34 6 12 6Z" fill="white"/>
                    </svg>
                </div>
                <div class="logo-text">Weather Forecast</div>
            </div>
            <div class="language-selector">
                <button class="lang-btn active" data-lang="en">English</button>
                <button class="lang-btn" data-lang="si">සිංහල</button>
                <button class="lang-btn" data-lang="ta">தமிழ்</button>
            </div>
        </header>

        <div class="main-content">
            <div class="weather-card">
                <div class="card-header">
                    <div class="card-title">Weather Forecast</div>
                    <div class="audio-controls">
                        <button class="audio-btn" id="playEnglish">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 5V19L19 12L8 5Z" fill="currentColor"/>
                            </svg>
                        </button>
                        <button class="audio-btn" id="playSinhala">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 5V19L19 12L8 5Z" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="forecast-content" id="forecast-content">
                    <!-- Forecast content will be loaded here -->
                </div>
            </div>

            <div class="weather-card emergency-section">
               <a href="tel:117">
    <button class="emergency-btn" id="emergencyBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 3.5C14.18 3.01 13.15 3.01 12.33 3.5L6 7V9C6 9.55 6.45 10 7 10C7.55 10 8 9.55 8 9V7.5L12 5.5L16 7.5V9C16 9.55 16.45 10 17 10C17.55 10 18 9.55 18 9V7L21 9ZM19 12C18.45 12 18 12.45 18 13V19C18 19.55 18.45 20 19 20C19.55 20 20 19.55 20 19V13C20 12.45 19.55 12 19 12ZM13 13C13 12.45 12.55 12 12 12C11.45 12 11 12.45 11 13V19C11 19.55 11.45 20 12 20C12.55 20 13 19.55 13 19V13ZM7 13C6.45 13 6 13.45 6 14V19C6 19.55 6.45 20 7 20C7.55 20 8 19.55 8 19V14C8 13.45 7.55 13 7 13Z" fill="currentColor"></path>
        </svg>
        Emergency Services - 117
    </button>
</a>

            </div>

            <div class="weather-card api-section">
                <div class="card-header">
                    <div class="card-title">Live Weather Data</div>
                    <div id="api-status">
                        <span class="status-indicator status-active"></span>
                        <span>API Connected</span>
                    </div>
                </div>
                <div class="api-controls">
                    <button class="api-btn" id="fetchMeteo">Get Meteo Data</button>
                    <button class="api-btn" id="fetchCombined">Get Combined Analysis</button>
                    <button class="api-btn" id="clearData">Clear</button>
                </div>
                <div class="api-response" id="api-response">
                    API response will appear here...
                </div>
            </div>
        </div>

        <footer>
            <p>Weather Forecast System - Data provided by Department of Meteorology, Sri Lanka and Helakuru</p>
            <p>© 2025 Weather Forecast. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Forecast data
        const forecastData = {
            en: `WEATHER FORECAST FOR 28 NOVEMBER 2025
Issued at 2.00 p.m. on 27 NOVEMBER 2025

The depression over south-east of Sri Lanka has intensified into a deep depression and is centered near latitude 6.7°N and longitude 82.1°E, about 120 km south-east of Batticaloa. It is very likely to move nearly north-northwestwards and intensify into a Cyclonic storm during the next 12 hours.  Due to the influence of this system, prevailing heavy showers and strong winds over the island are expected to continue during the next few days. The general public is kindly requested to be attentive about future advisories issued by the Department of Meteorology in this regard.

Cloudy skies can be expected over most parts of the island and showers or thundershowers will occur at times.

Very heavy falls above 200 mm are likely at some places in Northern, North-central, Central and North-western provinces and in Trincomalee district and, above 150 mm are likely at some places in Sabaragamuwa and Western provinces and in Badulla and Batticaloa districts. Heavy falls above 100 mm are likely at some places in the other areas of the island.

Very strong winds at times about (60-70) kmph and gusting up to 80 kmph can be expected over the most parts of the island.

The general public is kindly requested to take adequate precautions to minimize damages caused by  heavy showers and strong winds.`,

            si: `2025 නොවැම්බර් මස 28 දිනය සඳහා කාලගුණ අනාවැකිය
2025 නොවැම්බර් මස 27 දින ප.ව. 2.00 ට නිකුත්කරන ලදී.

ශ්‍රී ලංකාවට ගිනිකොණ දෙසින් පැවති පීඩන අවපාතය මේ වන විට ගැඹුරු පීඩන අවපාතයක් දක්වා වර්ධනය වී මඩකලපුව සිට 120 km ක් ගිනිකොණ දෙසින්, අක්ෂාංශ 6.7°N සහ දේශාංශ 82.1°E ආසන්නයේ  කේන්ද්‍රගතව වී ඇත. එය උතුරට බරව වයඹ දෙසට ගමන් කරමින් ඉදිරි පැය 12 තුළ සුළි කුණාටුවක් දක්වා වර්ධනය වීමට බොහෝ දුරට ඉඩ ඇත. 
මෙම පද්ධතියේ බලපෑම හේතුවෙන් දිවයිනේ පවතින තද වැසි සහ තද සුළං තත්ත්වය ඉදිරි දින කිහිපයේදීත් බලාපොරොත්තු වේ. කාලගුණ විද්‍යා දෙපාර්තමේන්තුව මගින් මේ සම්බන්ධව නිකුත් කරන ඉදිරි නිවේදන පිලිබඳ අවධානය යොමුකරන ලෙස ඉල්ලා සිටිනු ලැබේ.

දිවයිනේ බොහෝ ප්‍රදේශවල අහස වලාකුළින් බරව පවතින අතර විටින් විට වැසි හෝ ගිගුරුම් සහිත වැසි ඇතිවේ.

උතුරු, උතුරු-මැද, මධ්‍යම සහ වයඹ පළාත්වලත් ත්‍රිකුණාමලය දිස්ත්‍රික්කයේත් ඇතැම් ස්ථානවලට මි.මී. 200 ට වැඩි ඉතා තද වැසි සහ, සබරගමුව සහ බස්නාහිර පළාත්වලත් බදුල්ල සහ මඩකලපුව දිස්ත්‍රික්කවලත් ඇතැම් ස්ථානවලට මි.මී. 150 ට වැඩි ඉතා තද වැසි ඇති විය හැක. 

දිවයිනේ සෙසු ප්‍රදේශවල ඇතැම් ස්ථානවලට මි.මී. 100 ට වැඩි තද වැසි ඇති විය හැක.

දිවයිනේ බොහෝ ප්‍රදේශවල හමන පැ.කි.මී. (60-70) දක්වා වන ඉතා තද සුළං සමඟ විටින් විට හමන පැ.කි.මී. 80 දක්වා වන ප්‍රහාරාත්මක සුළං ඇතිවිය හැක. 

තද වැසි සහ තද සුළං මඟින් සිදු වන අනතුරු අවම කර ගැනීමට අවශ්‍ය පියවර ගන්නා ලෙස ජනතාවගෙන් කාරුණිකව ඉල්ලා සිටිනු ලැබේ.`,

            ta: `2025 நவம்பர் 27ஆம் திகதிக்கான  வானிலை முன்னறிவிப்பு
2025 நவம்பர் 27ஆம் திகதி அதிகாலை 05.30 மணிக்கு வெளியிடப்பட்டது.

இலங்கைக்குத் தென்கிழக்காக விருத்தியடைந்த குறைந்த அழுத்தப் பிரதேசம் ஒரு தாழமுக்கமாக வலுவடைந்து மட்டக்களப்புக்குத் தென்கிழக்காக ஏறத்தாழ 210 கிலோ மீற்றர் தூரத்தில் வட அகலாங்கு 5.9°N இற்கும் கிழக்கு நெடுங்கோடு 82.6°E இற்கும் அருகில் மையம் கொண்டிருக்கின்றது. அது வடக்கு - வடமேற்குத் திசையில் நகரக் கூடிய சாத்தியம் காணப்படுவதுடன், அடுத்த 12 மணித்தியாலங்களில் ஒரு ஆழமான தாழமுக்கமாக வலுவடையும் என எதிர்பார்க்கப்படுகின்றது.

இத் தொகுதியின் தாக்கம் காரணமாக நாட்டில்  தற்போது நிலவும் பலத்த மழை நிலைமையும் கடும் காற்று நிலைமையும் அடுத்த சில நாட்களுக்கும் தொடரும் என எதிர்பார்க்கப்படுகின்றது.  இவ்விடயம் தொடர்பாக  வளிமண்டலவியல் திணைக்களத்தால் வழங்கப்படும் எதிர்கால முன்னறிவிப்புகள் மற்றும் அறிக்கைகள் தொடர்பாக  பொதுமக்கள் அவதானமாக இருக்குமாறு வேண்டிக் கொள்ளப்படுகிறார்கள்.

நாட்டின் பெரும்பாலான பிரதேசங்களில் மேகமூட்டமான வானம் காணப்படும் என எதிர்பார்க்கப்படுவதுடன், அவ்வப்போது மழையோ அல்லது இடியுடன் கூடிய மழையோ பெய்யக் கூடிய சாத்தியம் காணப்படுகின்றது.

வடமத்திய மற்றும் வடமேல் மாகாணங்களிலும் திருகோணமலை மாவட்டத்திலும் சில இடங்களில் 200 மி.மீ க்கும் அதிகமான மிகப் பலத்த மழைவீழ்ச்சி எதிர்பார்க்கப்படுவதுடன், வடக்கு, மத்திய, சப்ரகமுவ, ஊவா மற்றும் மேல் மாகாணங்களிலும் காலி, மாத்தறை மற்றும் மட்டக்களப்பு மாவட்டங்களிலும் சில இடங்களில் 150 மி.மீ க்கும் அதிகமான மிகப் பலத்த மழைவீழ்ச்சி எதிர்பார்க்கப்படுகின்றது. நாட்டின் ஏனைய பிரதேசங்களில் சில இடங்களில் 100 மி.மீ க்கும் அதிகமான பலத்த மழைவீழ்ச்சி எதிர்பார்க்கப்படுகின்றது.

நாட்டின் பெரும்பாலான பிரதேசங்களில் அவ்வப்போது மணித்தியாலத்துக்கு 60-70 கிலோ மீற்றர் வரையான வேகத்தில் மிகப் பலத்த காற்று வீசக் கூடும் என எதிர்பார்க்கப்படுகின்றது.

பலத்த காற்று மற்றும் மின்னல் தாக்கங்களினால் ஏற்படக்கூடிய பாதிப்புகளைக் குறைக்க போதுமான முன்னெச்சரிக்கை நடவடிக்கைகளை எடுக்குமாறு பொதுமக்கள் கேட்டுக் கொள்ளப்படுகிறார்கள்.`
        };

        // Audio sources
        const audioSources = {
            en: "https://meteo.gov.lk/voices/forecast_voice_en.wav?v=1764253895",
            si: "https://meteo.gov.lk/voices/forecast_voice_si.wav?v=1764253895"
        };

        // API configuration
        const API_CONFIG = {
            URL: 'https://endpoint.apilageai.lk/api/chat',
            KEY: 'apk_uwNTUYF4MADr8MLSX0xzKgMFbW6i2Pfb',
            MODEL: 'PRO'
        };

        // DOM elements
        const forecastContent = document.getElementById('forecast-content');
        const langButtons = document.querySelectorAll('.lang-btn');
        const playEnglishBtn = document.getElementById('playEnglish');
        const playSinhalaBtn = document.getElementById('playSinhala');
        const emergencyBtn = document.getElementById('emergencyBtn');
        const fetchMeteoBtn = document.getElementById('fetchMeteo');
        const fetchHelakuruBtn = document.getElementById('fetchHelakuru');
        const fetchCombinedBtn = document.getElementById('fetchCombined');
        const clearDataBtn = document.getElementById('clearData');
        const apiResponse = document.getElementById('api-response');
        const apiStatus = document.getElementById('api-status');

        // Current language
        let currentLang = 'en';

        // Initialize the page
        function init() {
            // Set initial forecast content
            updateForecastContent();
            
            // Set up language buttons
            langButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    langButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    button.classList.add('active');
                    // Update current language
                    currentLang = button.getAttribute('data-lang');
                    // Update forecast content
                    updateForecastContent();
                });
            });

            // Set up audio buttons
            playEnglishBtn.addEventListener('click', () => playAudio('en'));
            playSinhalaBtn.addEventListener('click', () => playAudio('si'));

            // Set up emergency button
            emergencyBtn.addEventListener('click', () => {
                alert('Calling Emergency Services: 117\nPlease stay on the line for assistance.');
            });

            // Set up API buttons
            fetchMeteoBtn.addEventListener('click', fetchMeteoData);
            fetchCombinedBtn.addEventListener('click', fetchCombinedAnalysis);
            clearDataBtn.addEventListener('click', () => {
                apiResponse.textContent = 'API response will appear here...';
            });

            // Test API connection on load
            testAPIConnection();
        }

        // Update forecast content based on current language
        function updateForecastContent() {
            const content = forecastData[currentLang];
            // Replace line breaks with <br> tags for HTML display
            forecastContent.innerHTML = content.replace(/\n/g, '<br>');
        }

        // Play audio for the selected language
        function playAudio(lang) {
            if (audioSources[lang]) {
                const audio = new Audio(audioSources[lang]);
                audio.play().catch(e => {
                    console.error('Error playing audio:', e);
                    alert(`Unable to play ${lang.toUpperCase()} audio. The audio file may be unavailable.`);
                });
            } else {
                alert(`Audio not available for ${lang.toUpperCase()}`);
            }
        }

        // Test API connection
        async function testAPIConnection() {
            try {
                const response = await fetch(API_CONFIG.URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_CONFIG.KEY}`
                    },
                    body: JSON.stringify({
                        model: API_CONFIG.MODEL,
                        messages: [
                            {
                                role: 'user',
                                content: 'Test connection'
                            }
                        ]
                    })
                });
                
                if (response.ok) {
                    apiStatus.innerHTML = '<span class="status-indicator status-active"></span><span>API Connected</span>';
                } else {
                    throw new Error('API not responding properly');
                }
            } catch (error) {
                console.error('API connection test failed:', error);
                apiStatus.innerHTML = '<span class="status-indicator status-inactive"></span><span>API Connection Failed</span>';
            }
        }

        // Fetch weather data from Meteo API
        async function fetchMeteoData() {
            apiResponse.innerHTML = '<div class="loading"></div> Fetching data from Department of Meteorology...';
            
            try {
                // In a real implementation, you would make an actual API call here
                // For demonstration, we'll simulate a response
                async function fetchMeteoData() {
    apiResponse.innerHTML = '<div class="loading"></div> Fetching real-time data...';

    try {
        const response = await fetch('https://api.openweathermap.org/data/2.5/weather?q=Colombo&appid=38952a629f2a0536906d8f6bb571c00f&units=metric');
        if (!response.ok) throw new Error('Failed to fetch weather');
        const data = await response.json();

        apiResponse.textContent = JSON.stringify({
            status: 'success',
            source: 'OpenWeatherMap',
            data: {
                location: data.name,
                temperature: `${data.main.temp}°C`,
                humidity: `${data.main.humidity}%`,
                wind_speed: `${data.wind.speed} m/s`,
                condition: data.weather[0].description,
                update_time: new Date().toISOString()
            }
        }, null, 2);
    } catch (error) {
        apiResponse.textContent = `Error: ${error.message}`;
    }
}
            } catch (error) {
                console.error('Error fetching Meteo data:', error);
                apiResponse.textContent = `Error: ${error.message}`;
            }
        }

        // Fetch data from Helakuru
        async function fetchHelakuruData() {
            apiResponse.innerHTML = '<div class="loading"></div> Fetching data from Helakuru...';
            
            try {
                // In a real implementation, you would scrape or use Helakuru's API
                // For demonstration, we'll simulate a response
                setTimeout(() => {
                    const mockResponse = {
                        status: 'success',
                        source: 'Helakuru.lk',
                        data: {
                            title: 'Cyclone Alert: Deep Depression Intensifying',
                            summary: 'The depression over south-east of Sri Lanka has intensified into a deep depression and is likely to become a cyclonic storm.',
                            areas_affected: ['Eastern Province', 'Northern Province', 'North Central Province'],
                            emergency_measures: ['Schools closed in affected areas', 'Fishermen advised not to venture to sea'],
                            update_time: new Date().toISOString()
                        }
                    };
                    
                    apiResponse.textContent = JSON.stringify(mockResponse, null, 2);
                }, 1500);
            } catch (error) {
                console.error('Error fetching Helakuru data:', error);
                apiResponse.textContent = `Error: ${error.message}`;
            }
        }

        // Fetch combined analysis using Apilage AI
       async function fetchCombinedAnalysis() {
    apiResponse.innerHTML = '<div class="loading"></div> Analyzing combined data...';

    try {
        const meteoData = await fetchMeteoDataReturnJSON();
        const helakuruData = await fetchHelakuruDataReturnJSON();

        const response = await fetch(API_CONFIG.URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${API_CONFIG.KEY}`
            },
            body: JSON.stringify({
                model: API_CONFIG.MODEL,
                messages: [
                    {
                        role: 'user',
                        content: `Analyze this data:\nWeather: ${JSON.stringify(meteoData)}\nNews: ${JSON.stringify(helakuruData)}`
                    }
                ]
            })
        });

        const data = await response.json();
        const aiResponse = data.choices[0].message.content;
        apiResponse.textContent = aiResponse;

    } catch (error) {
        apiResponse.textContent = `Error: ${error.message}`;
    }
}

        // Initialize the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
